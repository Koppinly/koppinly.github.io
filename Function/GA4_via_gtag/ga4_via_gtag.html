<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>See Cloud</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script src="https://cdn.optimizely.com/js/4802505738027008.js"></script>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5V5JZ53K');</script>
    <!-- End Google Tag Manager -->
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V5JZ53K" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Container for Content -->
    <div class="container flex-grow-1" style="max-width: 1000px;">
        <!-- New Header Section -->
        <header class="global-header container-fluid px-4 py-3">
            <nav class="row d-flex justify-content-between align-items-center position-relative">
                <!-- Left Section - Branding -->
                <div class="col-4 branding-section">
                    <div class="d-flex align-items-center gap-3">
                        <h1 class="brand-title mb-0">SEECLOUD!</h1>
                        <span class="version-badge">v1.1.1</span>
                    </div>
                </div>

                <!-- Centered Navigation Widget -->
                <div class="nav-widget text-center">
                    <span class="menu-trigger">
                        Explore
                        <i class="fas fa-chevron-down ms-1"></i>
                    </span>
                    <div class="nav-menu">
                        <a href="/index.html" class="nav-link">Home</a>
                        <a href="/Function/function.html" class="nav-link">Function</a>
                        <a href="#page2" class="nav-link">Games (dead)</a>
                    </div>
                </div>

                <!-- Right Section - Metadata -->
                <div class="col-4 metadata-section">
                    <div class="d-flex flex-column align-items-end">
                        <span class="metadata-item">
                            Updated: <time>2025-01-31</time>
                        </span>
                        <span class="metadata-item">
                            Author: <a href="#" class="author-link">Connor Koppin</a>
                        </span>
                        <span class="metadata-item">
                            License: <span class="license-status">Open</span>
                        </span>
                    </div>
                </div>
            </nav>

            <!-- Decorative line -->
            <div class="header-line mt-3"></div>
        </header>


        <main class="overflow-auto flex-grow-1 pt-2">
            <div class="row mb-2 top-section">
                <!-- Bio and Info Section -->
                <div class="col-md-8 order-2 order-md-1">
                    <h1>This Page Uses GA4 via GTM</h1>
                    <button onclick="trackOptimizelyEvent()">Trigger Event Tracking</button>
                    <hr>
                </div>
                <div class="mt-3 col-md-8 order-2 order-md-1" style="position: relative; margin-top: 20px;">
                    <h3>Event Properties</h3>
                    <form id="eventForm">
                        <div class="form-group">
                            <label for="itemName">Item Name</label>
                            <select id="itemName" class="form-control">
                                <option value="Shoes">Shoes</option>
                                <option value="Shirt">Shirt</option>
                                <option value="Hats">Hats</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="itemCategory">Color</label>
                            <select id="itemCategory" class="form-control">
                                <option value="Red">Red</option>
                                <option value="Green">Green</option>
                                <option value="Blue">Blue</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="purchaseAmount">Purchase Amount ($)</label>
                            <input id="purchaseAmount" class="form-control" type="number" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <button type="button" class="btn btn-primary mt-2" onclick="eventProps()">Send Event with Properties</button>
                    </form>
                </div>
                
                <script>
                    function eventProps() {
                        const itemName = document.getElementById('itemName').value;
                        const itemCategory = document.getElementById('itemCategory').value;
                        const purchaseAmountInput = document.getElementById('purchaseAmount');
                
                        let value = parseFloat(purchaseAmountInput.value);
                
                        // Ensure valid number and format it properly
                        if (isNaN(value) || value < 0) {
                            alert('Please enter a valid purchase amount.');
                            return;
                        }
                
                        // Convert to cents
                        let valueInCents = Math.round(value * 100);
                
                        window['optimizely'] = window['optimizely'] || [];
                        window['optimizely'].push({
                            type: "event",
                            eventName: "item_purchase",
                            tags: {
                                revenue: valueInCents
                            },
                            properties: {
                                itemName: itemCategory,
                                "Purchase Amount": value.toFixed(2) // Store purchase amount in dollars (formatted)
                            }
                        });
                
                        alert(`Optimizely event sent: ${JSON.stringify({
                            revenue: valueInCents,
                            itemName: itemName,
                            itemCategory: itemCategory
                        })}`);
                    }
                </script>
                

                <!-- Bootstrap JS -->
                <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>